<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥‡é—¨éç”²éœ€æ±‚è¯„ä¼°ç³»ç»ŸV1.0</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0c2461, #1e3799, #4a69bd);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 215, 0, 0.3);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255, 215, 0, 0.5);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            background: linear-gradient(to right, #f6d365, #fda085);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #fda085;
            font-style: italic;
        }
        
        .main-content {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .input-section {
            flex: 1;
            background: rgba(12, 36, 97, 0.5);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(253, 187, 45, 0.3);
        }
        
        .result-section {
            flex: 1;
            background: rgba(30, 55, 153, 0.5);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(253, 187, 45, 0.3);
        }
        
        h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #fda085;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #fda085;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 1rem;
        }
        
        textarea {
            height: 100px;
            resize: vertical;
        }
        
        button {
            width: 100%;
            padding: 12px;
            background: linear-gradient(to right, #0c2461, #1e3799);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        button:hover {
            background: linear-gradient(to right, #1e3799, #0c2461);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .result-box {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            min-height: 300px;
        }
        
        .result-item {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .result-title {
            font-weight: bold;
            color: #fda085;
            margin-bottom: 5px;
        }
        
        .divination-result {
            text-align: center;
            font-size: 1.5rem;
            padding: 20px;
            margin-top: 20px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.5);
        }
        
        .good {
            color: #4CAF50;
            border: 2px solid #4CAF50;
        }
        
        .neutral {
            color: #FFC107;
            border: 2px solid #FFC107;
        }
        
        .bad {
            color: #F44336;
            border: 2px solid #F44336;
        }
        
        .qimen-diagram {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0;
            gap: 10px;
        }
        
        .qimen-cell {
            width: 60px;
            height: 60px;
            border: 1px solid #fda085;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 0.8rem;
            background: rgba(0, 0, 0, 0.5);
        }
        
        .qimen-cell.center {
            background: rgba(253, 160, 133, 0.2);
        }
        
        .qimen-cell.good {
            border-color: #4CAF50;
        }
        
        .qimen-cell.bad {
            border-color: #F44336;
        }
        
        .qimen-title {
            font-weight: bold;
        }
        
        .strategy-section {
            background: rgba(12, 36, 97, 0.5);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(253, 187, 45, 0.3);
            margin-top: 30px;
        }
        
        .strategy-content {
            display: none;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
        }
        
        .strategy-item {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .strategy-title {
            font-weight: bold;
            color: #fda085;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .strategy-desc {
            margin-left: 10px;
        }
        
        .ritual-item {
            padding: 10px;
            margin: 10px 0;
            background: rgba(30, 55, 153, 0.2);
            border-left: 3px solid #fda085;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 215, 0, 0.3);
            font-style: italic;
            color: #fda085;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>å¥‡é—¨éç”²éœ€æ±‚è¯„ä¼°ç³»ç»ŸV1.0</h1>
            <p class="subtitle">èåˆå¥‡é—¨éç”²æ™ºæ…§ä¸ç§‘å­¦å†³ç­–çš„éœ€æ±‚è¯„ä¼°å¼•æ“</p>
        </header>
        
        <div class="main-content">
            <div class="input-section">
                <h2>éœ€æ±‚ä¿¡æ¯</h2>
                
                <div class="form-group">
                    <label for="requirementName">éœ€æ±‚åç§°</label>
                    <input type="text" id="requirementName" placeholder="è¯·è¾“å…¥éœ€æ±‚åç§°">
                </div>
                
                <div class="form-group">
                    <label for="requirementDesc">éœ€æ±‚æè¿°</label>
                    <textarea id="requirementDesc" placeholder="è¯·ç®€è¦æè¿°éœ€æ±‚å†…å®¹"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="requirementType">éœ€æ±‚ç±»å‹</label>
                    <select id="requirementType">
                        <option value="åŠŸèƒ½å¼€å‘">åŠŸèƒ½å¼€å‘</option>
                        <option value="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–</option>
                        <option value="ç•Œé¢è®¾è®¡">ç•Œé¢è®¾è®¡</option>
                        <option value="ç³»ç»Ÿé›†æˆ">ç³»ç»Ÿé›†æˆ</option>
                        <option value="é—®é¢˜ä¿®å¤">é—®é¢˜ä¿®å¤</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="urgency">ç´§æ€¥ç¨‹åº¦</label>
                    <select id="urgency">
                        <option value="ä½">ä½ - å¯å»¶åå¤„ç†</option>
                        <option value="ä¸­">ä¸­ - æ­£å¸¸å¤„ç†</option>
                        <option value="é«˜">é«˜ - éœ€è¦ä¼˜å…ˆå¤„ç†</option>
                        <option value="ç´§æ€¥">ç´§æ€¥ - ç«‹å³å¤„ç†</option>
                    </select>
                </div>
                
                <button id="evaluateBtn">å¯åŠ¨å¥‡é—¨éç”²è¯„ä¼°</button>
            </div>
            
            <div class="result-section">
                <h2>å¥‡é—¨éç”²è¯„ä¼°ç»“æœ</h2>
                
                <div class="result-box">
                    <div class="qimen-diagram" id="qimenDiagram">
                        <!-- å¥‡é—¨éç”²ä¹å®«å›¾å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                    
                    <div id="qimenResult" class="result-item">
                        <div class="result-title">å¥‡é—¨å±€åˆ†æ</div>
                        <div>ç­‰å¾…èµ·å±€...</div>
                    </div>
                    
                    <div id="doorResult" class="result-item">
                        <div class="result-title">å…«é—¨åˆ†æ</div>
                        <div>ç­‰å¾…åˆ†æ...</div>
                    </div>
                    
                    <div id="starResult" class="result-item">
                        <div class="result-title">ä¹æ˜Ÿåˆ†æ</div>
                        <div>ç­‰å¾…åˆ†æ...</div>
                    </div>
                    
                    <div id="divinationResult" class="divination-result">
                        è¯·æäº¤éœ€æ±‚è¿›è¡Œå¥‡é—¨éç”²å åœ
                    </div>
                </div>
            </div>
        </div>
        
        <div class="strategy-section">
            <h2>å¥‡é—¨éç”²åº”å¯¹ç­–ç•¥</h2>
            <div id="strategyContent" class="strategy-content">
                <div class="strategy-item">
                    <div class="strategy-title">å¥‡é—¨å¸ƒå±€å»ºè®®</div>
                    <div id="layoutStrategy" class="strategy-desc">ç­‰å¾…åˆ†æ...</div>
                </div>
                
                <div class="strategy-item">
                    <div class="strategy-title">æœ€ä½³è¡ŒåŠ¨æ—¶æœº</div>
                    <div id="timingStrategy" class="strategy-desc">ç­‰å¾…åˆ†æ...</div>
                </div>
                
                <div class="strategy-item">
                    <div class="strategy-title">æ–¹ä½é€‰æ‹©å»ºè®®</div>
                    <div id="directionStrategy" class="strategy-desc">ç­‰å¾…åˆ†æ...</div>
                </div>
                
                <div class="strategy-item">
                    <div class="strategy-title">å¥‡é—¨åŒ–è§£æ–¹æ³•</div>
                    <div id="resolveStrategy" class="strategy-desc">
                        <div class="ritual-item">ç­‰å¾…åˆ†æ...</div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>å¥‡é—¨éç”²ç§˜ä¼  â€¢ ç§‘å­¦å†³ç­–ç³»ç»Ÿ â€¢ å¤©æ—¶åœ°åˆ©ï¼Œå¥‡é—¨åŠ©é˜µ</p>
        </footer>
    </div>

    <script>
        // è·å–DOMå…ƒç´ 
        const evaluateBtn = document.getElementById('evaluateBtn');
        const qimenDiagram = document.getElementById('qimenDiagram');
        const qimenResult = document.getElementById('qimenResult');
        const doorResult = document.getElementById('doorResult');
        const starResult = document.getElementById('starResult');
        const divinationResult = document.getElementById('divinationResult');
        
        // åº”å¯¹ç­–ç•¥å…ƒç´ 
        const strategyContent = document.getElementById('strategyContent');
        const layoutStrategy = document.getElementById('layoutStrategy');
        const timingStrategy = document.getElementById('timingStrategy');
        const directionStrategy = document.getElementById('directionStrategy');
        const resolveStrategy = document.getElementById('resolveStrategy');
        
        // å¥‡é—¨éç”²åŸºç¡€æ•°æ®
        const eightDoors = ['ä¼‘é—¨', 'ç”Ÿé—¨', 'ä¼¤é—¨', 'æœé—¨', 'æ™¯é—¨', 'æ­»é—¨', 'æƒŠé—¨', 'å¼€é—¨'];
        const nineStars = ['å¤©è“¬', 'å¤©èŠ®', 'å¤©å†²', 'å¤©è¾…', 'å¤©ç¦½', 'å¤©å¿ƒ', 'å¤©æŸ±', 'å¤©ä»»', 'å¤©è‹±'];
        const eightGods = ['å€¼ç¬¦', 'è…¾è›‡', 'å¤ªé˜´', 'å…­åˆ', 'ç™½è™', 'ç„æ­¦', 'ä¹åœ°', 'ä¹å¤©'];
        const directions = ['ä¸œ', 'ä¸œå—', 'å—', 'è¥¿å—', 'ä¸­', 'è¥¿', 'è¥¿åŒ—', 'åŒ—', 'ä¸œåŒ—'];
        
        // åˆå§‹åŒ–å¥‡é—¨ä¹å®«å›¾
        function initQimenDiagram() {
            qimenDiagram.innerHTML = '';
            
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.className = 'qimen-cell';
                if (i === 4) cell.classList.add('center');
                
                const title = document.createElement('div');
                title.className = 'qimen-title';
                title.textContent = directions[i];
                
                const content = document.createElement('div');
                content.className = 'qimen-content';
                content.textContent = 'å¾…å®š';
                
                cell.appendChild(title);
                cell.appendChild(content);
                qimenDiagram.appendChild(cell);
            }
        }
        
        // ç„å­¦è¯„ä¼°é€»è¾‘
        evaluateBtn.addEventListener('click', () => {
            // è·å–è¾“å…¥å€¼
            const requirementName = document.getElementById('requirementName').value || 'æœªå‘½åéœ€æ±‚';
            const requirementDesc = document.getElementById('requirementDesc').value || 'æ— æè¿°';
            const requirementType = document.getElementById('requirementType').value;
            const urgency = document.getElementById('urgency').value;
            
            // ä½¿ç”¨å½“å‰æ—¶é—´è‡ªåŠ¨èµ·å±€
            const now = new Date();
            const hour = now.getHours();
            const minute = now.getMinutes();
            
            // ç”Ÿæˆå¥‡é—¨éç”²å±€
            const qimenAnalysis = analyzeQimen(requirementType, urgency, hour, minute);
            
            // æ›´æ–°ä¹å®«å›¾
            updateQimenDiagram(qimenAnalysis);
            
            // æ˜¾ç¤ºåˆ†æç»“æœ
            qimenResult.innerHTML = `<div class="result-title">å¥‡é—¨å±€åˆ†æ</div><div>${qimenAnalysis.text}</div>`;
            doorResult.innerHTML = `<div class="result-title">å…«é—¨åˆ†æ</div><div>${qimenAnalysis.doorAnalysis}</div>`;
            starResult.innerHTML = `<div class="result-title">ä¹æ˜Ÿåˆ†æ</div><div>${qimenAnalysis.starAnalysis}</div>`;
            
            // ç»¼åˆå åœç»“æœ
            const divination = getDivinationResult(qimenAnalysis.score);
            divinationResult.textContent = divination.text;
            divinationResult.className = 'divination-result ' + divination.class;
            
            // æ˜¾ç¤ºåº”å¯¹ç­–ç•¥
            showStrategy(qimenAnalysis);
            
            // æ˜¾ç¤ºç­–ç•¥å†…å®¹
            strategyContent.style.display = 'block';
        });
        
        // å¥‡é—¨éç”²åˆ†æå‡½æ•°
        function analyzeQimen(type, urgency, hour, minute) {
            // æ ¹æ®æ—¶é—´è®¡ç®—å±€æ•°ï¼ˆç®€åŒ–ç‰ˆï¼‰
            const period = Math.floor(hour / 2) + 1; // æ—¶è¾°
            const day = new Date().getDate();
            const solarTerm = getSolarTerm(day);
            
            // æ ¹æ®éœ€æ±‚ç±»å‹å’Œç´§æ€¥ç¨‹åº¦ç¡®å®šåŸºç¡€åˆ†æ•°
            let baseScore = 50;
            
            switch(urgency) {
                case 'ä½': baseScore += 10; break;
                case 'ä¸­': baseScore += 20; break;
                case 'é«˜': baseScore += 30; break;
                case 'ç´§æ€¥': baseScore += 40; break;
            }
            
            switch(type) {
                case 'åŠŸèƒ½å¼€å‘': baseScore += 15; break;
                case 'æ€§èƒ½ä¼˜åŒ–': baseScore += 25; break;
                case 'ç•Œé¢è®¾è®¡': baseScore += 20; break;
                case 'ç³»ç»Ÿé›†æˆ': baseScore += 10; break;
                case 'é—®é¢˜ä¿®å¤': baseScore += 5; break;
            }
            
            // æ—¶è¾°å½±å“
            const hourEffect = (hour % 12) * 3;
            baseScore += hourEffect;
            
            // ç¡®ä¿åˆ†æ•°åœ¨0-100ä¹‹é—´
            baseScore = Math.max(0, Math.min(100, baseScore));
            
            // ç¡®å®šå‰å‡¶
            let doorIndex, starIndex, godIndex;
            let doorAnalysis, starAnalysis;
            
            if (baseScore >= 80) {
                doorIndex = 1; // ç”Ÿé—¨
                starIndex = 3; // å¤©è¾…
                godIndex = 7; // ä¹å¤©
                doorAnalysis = "ç”Ÿé—¨å½“å€¼ï¼Œå¤§å‰ã€‚æ­¤éœ€æ±‚å‘å±•é¡ºåˆ©ï¼Œå®¹æ˜“æˆåŠŸã€‚";
                starAnalysis = "å¤©è¾…æ˜Ÿç…§ä¸´ï¼Œæœ‰è´µäººç›¸åŠ©ï¼ŒæŠ€æœ¯éš¾é¢˜æ˜“è§£ã€‚";
            } else if (baseScore >= 60) {
                doorIndex = 0; // ä¼‘é—¨
                starIndex = 6; // å¤©æŸ±
                godIndex = 3; // å…­åˆ
                doorAnalysis = "ä¼‘é—¨å½“å€¼ï¼Œå¹³å‰ã€‚æ­¤éœ€æ±‚éœ€ç¨³æ­¥æ¨è¿›ï¼Œä¸å¯æ€¥èºã€‚";
                starAnalysis = "å¤©æŸ±æ˜Ÿç…§ä¸´ï¼Œéœ€æ³¨æ„æ²Ÿé€šï¼Œé¿å…è¯¯è§£ã€‚";
            } else {
                doorIndex = 5; // æ­»é—¨
                starIndex = 1; // å¤©èŠ®
                godIndex = 4; // ç™½è™
                doorAnalysis = "æ­»é—¨å½“å€¼ï¼Œå‡¶ã€‚æ­¤éœ€æ±‚é˜»åŠ›è¾ƒå¤§ï¼Œéœ€è°¨æ…å¤„ç†ã€‚";
                starAnalysis = "å¤©èŠ®æ˜Ÿç…§ä¸´ï¼Œéœ€æ³¨æ„æŠ€æœ¯é£é™©å’Œå›¢é˜Ÿåä½œé—®é¢˜ã€‚";
            }
            
            return {
                text: `å½“å‰ä¸º${solarTerm}èŠ‚æ°”ï¼Œ${period}æ—¶è¾°å±€ã€‚éœ€æ±‚åŸºç¡€è¯„åˆ†ä¸º${baseScore}åˆ†ã€‚`,
                score: baseScore,
                door: eightDoors[doorIndex],
                star: nineStars[starIndex],
                god: eightGods[godIndex],
                doorAnalysis: doorAnalysis,
                starAnalysis: starAnalysis,
                period: period,
                solarTerm: solarTerm
            };
        }
        
        // è·å–èŠ‚æ°”ï¼ˆç®€åŒ–ç‰ˆï¼‰
        function getSolarTerm(day) {
            const terms = [
                "å°å¯’", "å¤§å¯’", "ç«‹æ˜¥", "é›¨æ°´", "æƒŠè›°", "æ˜¥åˆ†",
                "æ¸…æ˜", "è°·é›¨", "ç«‹å¤", "å°æ»¡", "èŠ’ç§", "å¤è‡³",
                "å°æš‘", "å¤§æš‘", "ç«‹ç§‹", "å¤„æš‘", "ç™½éœ²", "ç§‹åˆ†",
                "å¯’éœ²", "éœœé™", "ç«‹å†¬", "å°é›ª", "å¤§é›ª", "å†¬è‡³"
            ];
            
            const termIndex = Math.floor(day / 15) % 24;
            return terms[termIndex];
        }
        
        // æ›´æ–°å¥‡é—¨ä¹å®«å›¾
        function updateQimenDiagram(analysis) {
            const cells = document.querySelectorAll('.qimen-cell');
            
            // ä¸­å®«
            cells[4].querySelector('.qimen-content').textContent = `${analysis.door}\n${analysis.star}`;
            
            // æ ¹æ®åˆ†æ•°ç¡®å®šå‰å‡¶æ–¹ä½
            if (analysis.score >= 80) {
                // å‰é—¨åœ¨ç”Ÿé—¨ï¼ˆä¸œåŒ—ï¼‰ï¼Œå‰æ˜Ÿåœ¨å¤©è¾…ï¼ˆä¸œå—ï¼‰
                cells[0].querySelector('.qimen-content').textContent = "ä¼¤é—¨\nå¤©å†²";
                cells[1].querySelector('.qimen-content').textContent = "æœé—¨\nå¤©è¾…";
                cells[2].querySelector('.qimen-content').textContent = "æ™¯é—¨\nå¤©è‹±";
                cells[3].querySelector('.qimen-content').textContent = "æ­»é—¨\nå¤©èŠ®";
                cells[5].querySelector('.qimen-content').textContent = "æƒŠé—¨\nå¤©æŸ±";
                cells[6].querySelector('.qimen-content').textContent = "å¼€é—¨\nå¤©å¿ƒ";
                cells[7].querySelector('.qimen-content').textContent = "ä¼‘é—¨\nå¤©è“¬";
                cells[8].querySelector('.qimen-content').textContent = "ç”Ÿé—¨\nå¤©ä»»";
                
                // æ ‡è®°å‰å‡¶
                cells[8].classList.add('good'); // ç”Ÿé—¨å‰
                cells[1].classList.add('good'); // å¤©è¾…å‰
            } else if (analysis.score >= 60) {
                // å¹³å±€
                cells[0].querySelector('.qimen-content').textContent = "ä¼‘é—¨\nå¤©è“¬";
                cells[1].querySelector('.qimen-content').textContent = "ç”Ÿé—¨\nå¤©ä»»";
                cells[2].querySelector('.qimen-content').textContent = "ä¼¤é—¨\nå¤©å†²";
                cells[3].querySelector('.qimen-content').textContent = "æœé—¨\nå¤©è¾…";
                cells[5].querySelector('.qimen-content').textContent = "æ™¯é—¨\nå¤©è‹±";
                cells[6].querySelector('.qimen-content').textContent = "æ­»é—¨\nå¤©èŠ®";
                cells[7].querySelector('.qimen-content').textContent = "æƒŠé—¨\nå¤©æŸ±";
                cells[8].querySelector('.qimen-content').textContent = "å¼€é—¨\nå¤©å¿ƒ";
            } else {
                // å‡¶å±€
                cells[0].querySelector('.qimen-content').textContent = "æ­»é—¨\nå¤©èŠ®";
                cells[1].querySelector('.qimen-content').textContent = "æƒŠé—¨\nå¤©æŸ±";
                cells[2].querySelector('.qimen-content').textContent = "å¼€é—¨\nå¤©å¿ƒ";
                cells[3].querySelector('.qimen-content').textContent = "ä¼‘é—¨\nå¤©è“¬";
                cells[5].querySelector('.qimen-content').textContent = "ç”Ÿé—¨\nå¤©ä»»";
                cells[6].querySelector('.qimen-content').textContent = "ä¼¤é—¨\nå¤©å†²";
                cells[7].querySelector('.qimen-content').textContent = "æœé—¨\nå¤©è¾…";
                cells[8].querySelector('.qimen-content').textContent = "æ™¯é—¨\nå¤©è‹±";
                
                // æ ‡è®°å‰å‡¶
                cells[0].classList.add('bad'); // æ­»é—¨å‡¶
            }
        }
        
        // ç»¼åˆå åœç»“æœ
        function getDivinationResult(score) {
            if (score >= 80) {
                return {
                    text: "âœ¨ å¥‡é—¨å¾—åˆ©ï¼Œå¤©æ—¶åœ°åˆ©äººå’Œï¼Œæ­¤éœ€æ±‚å¤§å‰ âœ¨",
                    class: "good"
                };
            } else if (score >= 60) {
                return {
                    text: "â˜¯ï¸ å¥‡é—¨å¹³å’Œï¼Œéœ€æŠŠæ¡æ—¶æœºï¼Œç¨³æ­¥æ¨è¿› â˜¯ï¸",
                    class: "neutral"
                };
            } else {
                return {
                    text: "ğŸ’€ å¥‡é—¨ä¸åˆ©ï¼Œéœ€åŒ–è§£é˜»åŠ›ï¼Œè°¨æ…è¡Œäº‹ ğŸ’€",
                    class: "bad"
                };
            }
        }
        
        // æ˜¾ç¤ºåº”å¯¹ç­–ç•¥
        function showStrategy(analysis) {
            // å¥‡é—¨å¸ƒå±€å»ºè®®
            if (analysis.score >= 80) {
                layoutStrategy.innerHTML = `
                    <p>å½“å‰å¥‡é—¨å±€å¤§å‰ï¼Œå»ºè®®ï¼š</p>
                    <ul>
                        <li>å……åˆ†åˆ©ç”¨ç”Ÿé—¨ï¼ˆä¸œåŒ—æ–¹ä½ï¼‰èƒ½é‡ï¼Œä»æ­¤æ–¹ä½å¼€å§‹å·¥ä½œ</li>
                        <li>å€ŸåŠ©å¤©è¾…æ˜Ÿï¼ˆä¸œå—æ–¹ä½ï¼‰çš„æ™ºæ…§èƒ½é‡ï¼Œè§£å†³æŠ€æœ¯éš¾é¢˜</li>
                        <li>åœ¨åŠå…¬åŒºä¸œåŒ—è§’æ”¾ç½®ç»¿è‰²æ¤ç‰©å¢å¼ºç”Ÿé—¨èƒ½é‡</li>
                        <li>å›¢é˜Ÿä¼šè®®å¯é€‰æ‹©åœ¨ä¸œå—æ–¹ä½ä¸¾è¡Œ</li>
                    </ul>
                `;
            } else if (analysis.score >= 60) {
                layoutStrategy.innerHTML = `
                    <p>å½“å‰å¥‡é—¨å±€å¹³å‰ï¼Œå»ºè®®ï¼š</p>
                    <ul>
                        <li>ç¨³æ‰ç¨³æ‰“ï¼Œé¿å…å†’è¿›</li>
                        <li>å¯å€ŸåŠ©ä¼‘é—¨ï¼ˆåŒ—æ–¹ä½ï¼‰èƒ½é‡è¿›è¡Œä¼‘æ•´å’Œè§„åˆ’</li>
                        <li>åˆ©ç”¨å…­åˆèƒ½é‡ä¿ƒè¿›å›¢é˜Ÿåä½œ</li>
                        <li>åœ¨åŠå…¬åŒºåŒ—æ–¹æ”¾ç½®æ°´å…ƒç´ ç‰©å“å¢å¼ºä¼‘é—¨èƒ½é‡</li>
                    </ul>
                `;
            } else {
                layoutStrategy.innerHTML = `
                    <p>å½“å‰å¥‡é—¨å±€ä¸åˆ©ï¼Œå»ºè®®ï¼š</p>
                    <ul>
                        <li>é¿å¼€æ­»é—¨ï¼ˆä¸œæ–¹ä½ï¼‰çš„ä¸åˆ©å½±å“</li>
                        <li>å€ŸåŠ©å¼€é—¨ï¼ˆè¥¿æ–¹ä½ï¼‰èƒ½é‡çªç ´å›°å¢ƒ</li>
                        <li>åˆ©ç”¨å¤©å¿ƒæ˜Ÿï¼ˆä¸­å®«ï¼‰æ™ºæ…§è§£å†³éš¾é¢˜</li>
                        <li>åœ¨åŠå…¬åŒºè¥¿æ–¹æ”¾ç½®é‡‘å±ç‰©å“å¢å¼ºå¼€é—¨èƒ½é‡</li>
                    </ul>
                `;
            }
            
            // æœ€ä½³è¡ŒåŠ¨æ—¶æœº
            const now = new Date();
            const hour = now.getHours();
            let bestTime = "";
            
            if (analysis.score >= 80) {
                bestTime = "ç«‹å³è¡ŒåŠ¨ï¼Œä»Šæ—¥" + (hour < 12 ? "ä¸Šåˆ" : "ä¸‹åˆ") + "æ˜¯æœ€ä½³æ—¶æœº";
            } else if (analysis.score >= 60) {
                bestTime = "æ˜æ—¥" + (hour % 2 === 0 ? "è¾°æ—¶ï¼ˆ7-9ç‚¹ï¼‰" : "åˆæ—¶ï¼ˆ11-13ç‚¹ï¼‰") + "å¼€å§‹ä¸ºå®œ";
            } else {
                bestTime = "ä¸‰æ—¥å" + (analysis.period % 2 === 0 ? "å·³æ—¶ï¼ˆ9-11ç‚¹ï¼‰" : "ç”³æ—¶ï¼ˆ15-17ç‚¹ï¼‰") + "å†è¡ŒåŠ¨";
            }
            
            timingStrategy.innerHTML = `<p>${bestTime}</p>`;
            
            // æ–¹ä½é€‰æ‹©å»ºè®®
            if (analysis.score >= 80) {
                directionStrategy.innerHTML = `
                    <p>å‰åˆ©æ–¹ä½ï¼šä¸œåŒ—ï¼ˆç”Ÿé—¨ï¼‰ã€ä¸œå—ï¼ˆå¤©è¾…æ˜Ÿï¼‰</p>
                    <p>å»ºè®®ï¼š</p>
                    <ul>
                        <li>ä¸»è¦å·¥ä½œåŒºåŸŸé€‰æ‹©ä¸œåŒ—æ–¹ä½</li>
                        <li>æŠ€æœ¯è®¨è®ºåŒºè®¾ç½®åœ¨ä¸œå—æ–¹ä½</li>
                        <li>é¿å…åœ¨è¥¿å—æ–¹ä½ï¼ˆæ­»é—¨å¯¹å†²ï¼‰è¿›è¡Œé‡è¦å†³ç­–</li>
                    </ul>
                `;
            } else if (analysis.score >= 60) {
                directionStrategy.innerHTML = `
                    <p>å‰åˆ©æ–¹ä½ï¼šåŒ—ï¼ˆä¼‘é—¨ï¼‰ã€ä¸­ï¼ˆå€¼ç¬¦ï¼‰</p>
                    <p>å»ºè®®ï¼š</p>
                    <ul>
                        <li>ä¸»è¦å·¥ä½œåŒºåŸŸé€‰æ‹©åŒ—æ–¹ä½</li>
                        <li>å›¢é˜Ÿåä½œåŒºè®¾ç½®åœ¨ä¸­å®«ä½ç½®</li>
                        <li>é¿å…åœ¨ä¸œæ–¹ä½ï¼ˆä¼¤é—¨ï¼‰è¿›è¡Œé‡è¦æ²Ÿé€š</li>
                    </ul>
                `;
            } else {
                directionStrategy.innerHTML = `
                    <p>å‰åˆ©æ–¹ä½ï¼šè¥¿ï¼ˆå¼€é—¨ï¼‰ã€ä¸­ï¼ˆå¤©å¿ƒæ˜Ÿï¼‰</p>
                    <p>å»ºè®®ï¼š</p>
                    <ul>
                        <li>ä¸»è¦å·¥ä½œåŒºåŸŸé€‰æ‹©è¥¿æ–¹ä½</li>
                        <li>é—®é¢˜è§£å†³åŒºè®¾ç½®åœ¨ä¸­å®«ä½ç½®</li>
                        <li>ç»å¯¹é¿å…åœ¨ä¸œæ–¹ä½ï¼ˆæ­»é—¨ï¼‰å¼€å±•å·¥ä½œ</li>
                    </ul>
                `;
            }
            
            // å¥‡é—¨åŒ–è§£æ–¹æ³•
            if (analysis.score >= 80) {
                resolveStrategy.innerHTML = `
                    <div class="ritual-item">
                        <strong>å¥‡é—¨åŠ©è¿æ³•</strong>
                        <p>æ—¶æœºï¼šä»Šæ—¥${analysis.period}æ—¶</p>
                        <p>æ–¹æ³•ï¼š</p>
                        <ol>
                            <li>åœ¨ä¸œåŒ—æ–¹ä½ç‚¹ç‡ƒç»¿è‰²èœ¡çƒ›</li>
                            <li>é¢å‘ä¸œå—æ–¹é™å3åˆ†é’Ÿï¼Œè§‚æƒ³æˆåŠŸåœºæ™¯</li>
                            <li>åœ¨é¡¹ç›®æ–‡æ¡£ä¸Šç”»"ç”Ÿé—¨ç¬¦"</li>
                            <li>å›¢é˜Ÿå…±åŒè¯µè¯»"å¥‡é—¨æˆåŠŸå’’"ä¸‰é</li>
                        </ol>
                    </div>
                `;
            } else if (analysis.score >= 60) {
                resolveStrategy.innerHTML = `
                    <div class="ritual-item">
                        <strong>å¥‡é—¨å¹³ç¨³æ³•</strong>
                        <p>æ—¶æœºï¼šæ˜æ—¥${analysis.period}æ—¶</p>
                        <p>æ–¹æ³•ï¼š</p>
                        <ol>
                            <li>åœ¨åŒ—æ–¹ä½æ”¾ç½®ä¸€æ¯æ¸…æ°´</li>
                            <li>å›¢é˜Ÿå›´åï¼Œå…±åŒå†¥æƒ³5åˆ†é’Ÿ</li>
                            <li>åœ¨åŠå…¬æ¡Œä¸­å¤®æ”¾ç½®åœ†å½¢ç‰©å“</li>
                            <li>è½»å£°è¯µè¯»"å¥‡é—¨å¹³ç¨³å’’"ä¸ƒé</li>
                        </ol>
                    </div>
                `;
            } else {
                resolveStrategy.innerHTML = `
                    <div class="ritual-item">
                        <strong>å¥‡é—¨åŒ–è§£æ³•</strong>
                        <p>æ—¶æœºï¼šä¸‰æ—¥å${analysis.period}æ—¶</p>
                        <p>æ–¹æ³•ï¼š</p>
                        <ol>
                            <li>åœ¨è¥¿æ–¹ä½æ”¾ç½®é‡‘å±é£é“ƒ</li>
                            <li>ç”¨ç›æ°´æ“¦æ‹­åŠå…¬è®¾å¤‡å‡€åŒ–</li>
                            <li>åœ¨ä¸œæ–¹ä½æ‚¬æŒ‚äº”å¸é’±åŒ–è§£æ­»é—¨</li>
                            <li>å›¢é˜Ÿå…±åŒè¯µè¯»"å¥‡é—¨åŒ–è§£å’’"ä¹é</li>
                        </ol>
                    </div>
                    <div class="ritual-item">
                        <strong>æ—¥å¸¸é˜²æŠ¤æ³•</strong>
                        <p>æ¯æ—¥æ™¨ä¼šå‰æ‰§è¡Œï¼š</p>
                        <ol>
                            <li>å›¢é˜Ÿé¢å‘è¥¿æ–¹æ‹æ‰‹ä¹æ¬¡</li>
                            <li>æ¯äººè¯´å‡ºä¸€é¡¹ä»Šæ—¥è¦å®Œæˆçš„å…·ä½“ä»»åŠ¡</li>
                            <li>å…±åŒå–Šå‡º"å¥‡é—¨æŠ¤ä½‘ï¼Œè¯¸äº‹é¡ºåˆ©"</li>
                        </ol>
                    </div>
                `;
            }
        }
        
        // åˆå§‹åŒ–é¡µé¢
        window.onload = function() {
            initQimenDiagram();
        };
    </script>
</body>
</html>